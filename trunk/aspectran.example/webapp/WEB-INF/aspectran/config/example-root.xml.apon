# C:\Users\Gulendol\Projects\aspectran\ADE\workspace\aspectran.example\webapp\WEB-INF\aspectran\config\example-root.xml.apon
aspectran: {
	setting: {
		transletNamePattern: "/example/*"
		transletNamePatternPrefix: "/example/"
		transletInterfaceClass: "com.aspectran.example.common.MyTranslet"
		transletImplementClass: "com.aspectran.example.common.MyTransletImpl"
		activityDefaultHandler: "webActivityDefaultHandler"
		nullableContentId: true
		nullableActionId: true
	}
	aspect: {
		id: "defaultRequestRule"
		useFor: "translet"
		joinpoint: {
			scope: "request"
		}
		setting: {
			multipart.temporaryFilePath: "/d:/"
			multipart.maxRequestSize: "10M"
			characterEncoding: "utf-8"
		}
	}
	aspect: {
		id: "defaultResponseRule"
		useFor: "translet"
		joinpoint: {
			scope: "response"
		}
		setting: {
			viewDispatcher: "jspViewDispatcher"
			characterEncoding: "utf-8"
			defaultContentType: "text/html"
		}
	}
	aspect: {
		id: "defaultResponseRule2"
		useFor: "translet"
		joinpoint: {
			scope: "response"
		}
		setting: {
			multipart.temporaryFilePath: "/d:/"
			multipart.maxRequestSize: "10M"
			characterEncoding: "utf-8"
		}
	}
	aspect: {
		id: "exception1"
		useFor: "translet"
		joinpoint: {
			scope: "translet"
			pointcut: {
				target: {
					translet: "/example/hello/*"
				}
			}
		}
		advice: {
			exceptionRaized: {
				responseByContentType: {
					exceptionType: "java.lang.reflect.InvocationTargetException"
					transform: {
						type: "transform/xml"
						contentType: "text/xml"
						action: {
						}
						action: {
							echo: {
								item: {
									type: "map"
									value: {
										errorCode: "E0001"
										message: "error occured."
									}
									tokenize: true
								}
							}
						}
					}
				}
			}
		}
	}
	aspect: {
		id: "helloAdvice"
		useFor: "translet"
		joinpoint: {
			scope: "translet"
			pointcut: {
				target: {
					+: "/example/hello/*@example.hello.HelloAction^applyTheAdvice"
					-: "/aaaa*@*^bbb"
				}
			}
		}
		advice: {
			bean: "advice.HelloAdvice"
			before: {
				action: {
					method: "beforeCountTo10"
				}
			}
			after: {
				action: {
					method: "afterCountTo10"
				}
			}
		}
	}
	bean: {
		id: "webActivityDefaultHandler"
		class: "com.aspectran.web.activity.WebActivityDefaultHandler"
		scope: "singleton"
	}
	bean: {
		id: "jspViewDispatcher"
		class: "com.aspectran.web.view.JspViewDispatcher"
		scope: "singleton"
	}
	bean: {
		id: "example.*"
		class: "com.aspectran.example.**.*Action"
		scope: "singleton"
	}
	bean: {
		id: "advice.*"
		class: "com.aspectran.example.aspect.**.*Advice"
		scope: "prototype"
	}
	bean: {
		id: "sampleBean"
		class: "com.aspectran.example.bean.SampleBean"
		scope: "singleton"
	}
	translet: {
		name: "hello"
		action: {
			id: "countTo10"
			beanId: "example.hello.HelloAction"
			method: "countTo10Array"
			argument: {
				item: {
					type: "array"
					value: [
						"1"
						"2"
						"3"
						"4"
						"5"
						"6"
						"7"
						"8"
						"9"
						"10"
					]
					valueType: "int"
					tokenize: true
				}
			}
		}
		transform: {
			type: "transform/text"
			contentType: "text/plain"
			template: {
				content: (
					|hello~ ${name}
					|				@{countTo10}
				)
			}
		}
	}
	translet: {
		name: "hello2"
		contents: {
			content: {
				action: {
					id: "countTo10"
					beanId: "example.hello.HelloAction"
					method: "countTo10AsArray"
				}
			}
		}
		response: {
			transform: {
				type: "transform/xml"
				contentType: "text/xml"
			}
		}
	}
	translet: {
		name: "hello3"
		content: {
			action: {
				id: "countTo10"
				beanId: "example.hello.HelloAction"
				method: "countTo10AsArray"
			}
		}
		response: {
			transform: {
				type: "transform/xml"
				contentType: "text/xml"
			}
		}
	}
	translet: {
		name: "hello4"
		content: {
			action: {
				include: "/example/hello3"
			}
		}
		response: {
			transform: {
				type: "transform/xml"
				contentType: "text/xml"
			}
		}
	}
	translet: {
		name: "hello/countTo10"
		response: {
			name: ".xml"
			transform: {
				type: "transform/xml"
				contentType: "text/xml"
				action: {
					id: "result"
					beanId: "example.hello.HelloAction"
					method: "countTo10AsArray"
				}
				pretty: true
			}
		}
		response: {
			name: ".json"
			transform: {
				type: "transform/json"
				contentType: "text/plain"
				action: {
					id: "result"
					beanId: "example.hello.HelloAction"
					method: "countTo10AsArray"
				}
				pretty: true
			}
		}
		response: {
			name: ".apon"
			transform: {
				type: "transform/apon"
				contentType: "text/plain"
				action: {
					id: "result"
					beanId: "example.hello.HelloAction"
					method: "countTo10AsArray"
				}
				pretty: true
			}
		}
	}
	translet: {
		name: "hello/countTo10twice"
		action: {
			id: "result1"
			beanId: "example.hello.HelloAction"
			method: "countTo10"
		}
		action: {
			id: "result2"
			beanId: "example.hello.HelloAction"
			method: "countTo10"
		}
		transform: {
			type: "transform/text"
			contentType: "text/plain"
			template: {
				content: (
					|(first)
					|@{result1}
					|(second)
					|@{result2}
				)
			}
		}
	}
	translet: {
		name: "hello/countTo10ext"
		response: {
			transform: {
				type: "transform/text"
				contentType: "text/plain"
				template: {
					content: (
						|@{result}
					)
				}
				action: {
					id: "result"
					beanId: "example.hello.HelloAction"
					method: "countTo10"
				}
			}
		}
		response: {
			name: ".xml"
			transform: {
				type: "transform/xml"
				contentType: "text/xml"
				action: {
					beanId: "example.hello.HelloAction"
					method: "countTo10AsArray"
				}
				pretty: true
			}
		}
	}
	translet: {
		name: "hello/applyTheAdvice.xml"
		transform: {
			type: "transform/xml"
			contentType: "text/xml"
			action: {
				id: "applyTheAdvice"
				beanId: "example.hello.HelloAction"
				method: "applyTheAdvice"
			}
			pretty: true
		}
	}
	translet: {
		name: "echo"
		transform: {
			type: "transform/text"
			contentType: "text/html"
			template: {
				content: (
					|<html>
					|<style>
					|body { background-color: blue; color: white; }
					|dt { font-weight: bold; color: yellow; }
					|</style>
					|<body>
					|	<dl>
					|		<dt>item1</dt>
					|		<dd>@{echo^params.param1}</dd>
					|		<dt>item2</dt>
					|		<dd>@{echo^params.param2}</dd>
					|	</dl>
					|</body>
					|</html>
				)
			}
			action: {
				id: "echo"
				echo: {
					item: {
						type: "map"
						name: "params"
						value: {
							param1: "${param1}"
							param2: "${param2}"
						}
						valueType: "string"
						tokenize: true
					}
				}
			}
		}
	}
	translet: {
		name: "echoParameters"
		action: {
			beanId: "sampleBean"
			method: "getParameters"
		}
		action: {
			id: "echo"
			echo: {
				item: {
					name: "params"
					value: (
						|파라메터1: "${param1}"
						|				파라메터2: "${param2}"
					)
					valueType: "parameters"
					tokenize: true
				}
			}
		}
		transform: {
			type: "transform/apon"
			contentType: "text/plain"
			pretty: true
		}
	}
	translet: {
		name: "hello/sampleBean.txt"
		transform: {
			type: "transform/text"
			contentType: "text/plain"
			template: {
				content: (
					|text: @{sample}
					|The length of the output string is @{sample^length:0} bytes.
				)
			}
			action: {
				id: "sample"
				beanId: "sampleBean"
				method: "hello"
			}
		}
	}
	translet: {
		name: "goNaver"
		redirect: {
			url: "http://search.naver.com/search.naver"
			parameter: {
				item: {
					name: "where"
					value: "nexearch"
					tokenize: true
				}
				item: {
					name: "query"
					value: "서울"
					tokenize: true
				}
				item: {
					name: "sm"
					value: "top_hty"
					tokenize: true
				}
				item: {
					name: "fbm"
					value: "1"
					tokenize: true
				}
				item: {
					name: "ie"
					value: "utf8"
					tokenize: true
				}
			}
		}
	}
	import: {
		file: "/WEB-INF/aspectran/config/example-scheduler.xml"
	}
}
