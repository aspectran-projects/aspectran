<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE aspectran PUBLIC "-//aspectran.com//DTD Aspectran 1.0//EN"
                           "./dtd/aspectran-1.0.dtd">

<aspectran>

	<settings>
		<setting name="transletNamePattern" value="/example/*"/>
		<setting name="transletInterfaceClass" value="com.aspectran.web.activity.WebTranslet"/>
		<setting name="transletImplementClass" value="com.aspectran.web.activity.AspectranWebTranslet"/>
		<setting name="useNamespaces" value="true"/>
		<setting name="nullableContentId" value="true"/>
		<setting name="nullableActionId" value="true"/>
	</settings>
	
	<aspect id="defaultRequestRule">
		<joinpoint target="translet" scope="request"/>
		<settings>
			<setting name="characterEncoding" value="utf-8"/>
			<setting name="multipart.maxRequestSize" value="10M"/>
			<setting name="multipart.temporaryFilePath" value="/d:/"/>
		</settings>
	</aspect>
	
	<bean id="jspViewDispatcher" class="com.aspectran.web.view.JspViewDispatcher" scope="singleton"/>

	<aspect id="defaultResponseRule">
		<joinpoint target="translet" scope="response"/>
		<settings>
			<setting name="characterEncoding" value="utf-8"/>
			<setting name="defaultContentType" value="text/html"/>
			<setting name="viewDispatcher" value="jspViewDispatcher"/>
		</settings>
	</aspect>

	<aspect id="helloAdvice">
		<joinpoint target="translet" scope="action">
			<pointcut>/example/hello/*@applyTheAdvice</pointcut>
		</joinpoint>
		<before>
			<action bean="advice.HelloAdvice" method="beforeCountTo10"/>
		</before>
		<after>
			<action bean="advice.HelloAdvice" method="afterCountTo10"/>
		</after>
	</aspect>
	
	<bean id="example.*" class="com.aspectran.example.**.*Action" scope="singleton"/>
	<bean id="advice.*" class="com.aspectran.example.aspect.**.*Advice" scope="singleton"/>

	<translet name="hello">
		<transform type="transform/text">
			<template>
				hello~ ${name}
			</template>
		</transform>
	</translet>

	<translet name="hello/countTo10">
		<transform type="transform/text">
			<action id="result" bean="example.hello.HelloAction" method="countTo10"/>
			<template>
				@{result}
			</template>
		</transform>
	</translet>

	<translet name="hello/countTo10.xml">
		<transform type="transform/xml">
			<action id="result" bean="example.hello.HelloAction" method="countTo10AsArray"/>
		</transform>
	</translet>

	<translet name="hello/countTo10ext">
		<response>
			<transform type="transform/text">
				<action id="result" bean="example.hello.HelloAction" method="countTo10"/>
				<template>
					@{result}
				</template>
			</transform>
		</response>
		<response name=".xml">
			<transform type="transform/xml">
				<action id="result" bean="example.hello.HelloAction" method="countTo10AsArray"/>
			</transform>
		</response>
	</translet>

	<translet name="hello/applyTheAdvice.xml">
		<transform type="transform/xml">
			<action id="applyTheAdvice" bean="example.hello.HelloAction" method="applyTheAdvice"/>
		</transform>
	</translet>

	<translet name="goNaver">
		<redirect url="http://www.naver.com"/>
	</translet>
	
</aspectran>